version: 1
release:
  cadence: per-merge-to-main
  notes_dir: .changes
  manifest_file: manifest.yaml
  changelog_file: releases/CHANGELOG.md
  release_plan_file: release/latest-release-plan.json
  platform_tag_format: platform-YYYY.MM.DD.N

commit:
  require_scope: true
  default_bump_for_changed_component: patch
  type_bumps:
    feat: minor
    fix: patch
    perf: patch
    refactor: patch
    chore: patch
    docs: patch
    test: patch
    build: patch
    ci: patch

components:
  - name: app-tentacle
    scope: tentacle
    kind: app
    path_globs:
      - apps/tentacle/**
    version:
      kind: plain
      file: apps/tentacle/VERSION

  - name: app-inkpass
    scope: inkpass
    kind: app
    path_globs:
      - apps/inkpass/**
    version:
      kind: plain
      file: apps/inkpass/VERSION

  - name: app-mimic
    scope: mimic
    kind: app
    path_globs:
      - apps/mimic/**
    version:
      kind: plain
      file: apps/mimic/VERSION

  - name: pkg-flux-agent
    scope: flux-agent
    kind: python-package
    path_globs:
      - packages/flux-agent/**
    version:
      kind: pyproject
      file: packages/flux-agent/pyproject.toml
    runtime_version_files:
      - packages/flux-agent/flux_agent/version.py
    changelog: packages/flux-agent/CHANGELOG.md
    publish_dir: packages/flux-agent

  - name: pkg-aios-stripe
    scope: aios-stripe
    kind: python-package
    path_globs:
      - packages/aios-stripe/**
    version:
      kind: pyproject
      file: packages/aios-stripe/pyproject.toml
    runtime_version_files:
      - packages/aios-stripe/aios_stripe/version.py
    publish_dir: packages/aios-stripe

  - name: pkg-inkpass-sdk-python
    scope: inkpass-sdk
    kind: python-package
    path_globs:
      - packages/inkpass-sdk-python/**
    version:
      kind: pyproject
      file: packages/inkpass-sdk-python/pyproject.toml
    runtime_version_files:
      - packages/inkpass-sdk-python/inkpass_sdk/version.py
    publish_dir: packages/inkpass-sdk-python

  - name: pkg-mimic-sdk-python
    scope: mimic-sdk
    kind: python-package
    path_globs:
      - packages/mimic-sdk-python/**
    version:
      kind: setup-py
      file: packages/mimic-sdk-python/setup.py
    runtime_version_files:
      - packages/mimic-sdk-python/mimic/__init__.py
    publish_dir: packages/mimic-sdk-python

  - name: pkg-mimic-sdk-ts
    scope: mimic-sdk-ts
    kind: typescript-package
    path_globs:
      - packages/mimic-sdk-ts/**
    version:
      kind: package-json
      file: packages/mimic-sdk-ts/package.json
    publish_dir: packages/mimic-sdk-ts
